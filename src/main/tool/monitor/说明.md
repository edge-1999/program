### 1. 加入运行日志

可以在装饰器中添加日志记录逻辑，记录函数的调用、完成或错误信息。

```python
import logging
from functools import wraps

# 设置日志配置
logging.basicConfig(level=logging.INFO)

def log_decorator(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        logging.info(f"Function {func.__name__} started with args: {args} and kwargs: {kwargs}")
        try:
            result = func(*args, **kwargs)
            logging.info(f"Function {func.__name__} ended successfully")
            return result
        except Exception as e:
            logging.error(f"Function {func.__name__} raised an error: {e}")
            raise
    return wrapper
```

### 2. 数据写入MongoDB数据库

假设你要将函数的调用详情和结果保存到MongoDB数据库，你可以在装饰器中添加这个逻辑。这里只是一个简化的示例：

```python
from pymongo import MongoClient
from functools import wraps

client = MongoClient("mongodb://localhost:27017/")
db = client["mydatabase"]
collection = db["function_logs"]

def mongo_log_decorator(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        log_data = {"function": func.__name__, "args": args, "kwargs": kwargs}
        try:
            result = func(*args, **kwargs)
            log_data["result"] = result
            collection.insert_one(log_data)  # 将日志数据写入MongoDB
            return result
        except Exception as e:
            log_data["error"] = str(e)
            collection.insert_one(log_data)  # 记录错误信息
            raise
    return wrapper
```

在这个例子中，我们假设你已经有了一个MongoDB数据库和一个集合用于存储日志。装饰器会捕获函数的参数、返回值以及任何异常，并将它们写入数据库。

### 注意事项

- 在实际应用中，确保你的日志记录和数据库操作不会对函数的性能产生太大影响，尤其是在高频调用的场景中。
- 对于敏感数据，确保在记录日志或写入数据库前进行适当的脱敏处理，以防泄露。
- 对于数据库操作，考虑异常处理和连接管理，以确保代码的健壮性。
